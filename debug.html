<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>ğŸ” Debug de DependÃªncias</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #f0f0f0; }
        .error { color: red; }
        .success { color: green; }
        .warning { color: orange; }
        pre { background: white; padding: 15px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸ” Debug de DependÃªncias - DTI Digital</h1>
    <div id="results"></div>

    <script>
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
        }

        // Interceptar erros JavaScript
        window.addEventListener('error', function(e) {
            log(`âŒ ERRO JAVASCRIPT: ${e.message} em ${e.filename}:${e.lineno}`, 'error');
        });

        log('ğŸ”„ Iniciando debug...', 'info');
    </script>

    <!-- Carregar arquivos um por um para detectar onde estÃ¡ o erro -->
    <script>
        log('ğŸ“ Carregando CalculationUtils...', 'info');
    </script>
    <script src="src/js/utils/calculations.js"></script>
    <script>
        log(typeof CalculationUtils !== 'undefined' ? 'âœ… CalculationUtils OK' : 'âŒ CalculationUtils FALHOU', 
            typeof CalculationUtils !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ“ Carregando ValidationUtils...', 'info');
    </script>
    <script src="src/js/utils/validators.js"></script>
    <script>
        log(typeof ValidationUtils !== 'undefined' ? 'âœ… ValidationUtils OK' : 'âŒ ValidationUtils FALHOU', 
            typeof ValidationUtils !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ“ Carregando Order...', 'info');
    </script>
    <script src="src/js/models/Order.js"></script>
    <script>
        log(typeof Order !== 'undefined' ? 'âœ… Order OK' : 'âŒ Order FALHOU', 
            typeof Order !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ“ Carregando Drone...', 'info');
    </script>
    <script src="src/js/models/Drone.js"></script>
    <script>
        log(typeof Drone !== 'undefined' ? 'âœ… Drone OK' : 'âŒ Drone FALHOU', 
            typeof Drone !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ“ Carregando SimulationEngine...', 'info');
    </script>
    <script src="src/js/models/SimulationEngine.js"></script>
    <script>
        log(typeof SimulationEngine !== 'undefined' ? 'âœ… SimulationEngine OK' : 'âŒ SimulationEngine FALHOU', 
            typeof SimulationEngine !== 'undefined' ? 'success' : 'error');
            
        // Teste de instanciaÃ§Ã£o
        if (typeof SimulationEngine !== 'undefined') {
            try {
                const engine = new SimulationEngine();
                log('âœ… SimulationEngine pode ser instanciado', 'success');
            } catch (e) {
                log(`âŒ Erro ao instanciar SimulationEngine: ${e.message}`, 'error');
            }
        }
    </script>

    <script>
        log('ğŸ“ Carregando serviÃ§os...', 'info');
    </script>
    <script src="src/js/services/DroneService.js"></script>
    <script src="src/js/services/OrderService.js"></script>
    <script src="src/js/services/OptimizationService.js"></script>
    <script>
        log(typeof DroneService !== 'undefined' ? 'âœ… DroneService OK' : 'âŒ DroneService FALHOU', 
            typeof DroneService !== 'undefined' ? 'success' : 'error');
        log(typeof OrderService !== 'undefined' ? 'âœ… OrderService OK' : 'âŒ OrderService FALHOU', 
            typeof OrderService !== 'undefined' ? 'success' : 'error');
        log(typeof OptimizationService !== 'undefined' ? 'âœ… OptimizationService OK' : 'âŒ OptimizationService FALHOU', 
            typeof OptimizationService !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ“ Carregando SimulationController...', 'info');
    </script>
    <script src="src/js/controllers/SimulationController.js"></script>
    <script>
        log(typeof SimulationController !== 'undefined' ? 'âœ… SimulationController OK' : 'âŒ SimulationController FALHOU', 
            typeof SimulationController !== 'undefined' ? 'success' : 'error');
    </script>

    <script>
        log('ğŸ‰ Debug concluÃ­do!', 'success');
        log('ğŸ“Š Resultado final:', 'warning');
        
        const classes = ['CalculationUtils', 'ValidationUtils', 'Order', 'Drone', 'SimulationEngine', 'DroneService', 'OrderService', 'OptimizationService', 'SimulationController'];
        let success = 0;
        
        classes.forEach(cls => {
            if (typeof window[cls] !== 'undefined') {
                success++;
                log(`âœ… ${cls}`, 'success');
            } else {
                log(`âŒ ${cls}`, 'error');
            }
        });
        
        log(`ğŸ“ˆ Total: ${success}/${classes.length} classes carregadas`, success === classes.length ? 'success' : 'error');
    </script>
</body>
</html>
