<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Entregas por Drone - DTI Digital</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/dashboard.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-drone"></i>
                <h1>DroneLogistics</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
                <button class="nav-btn" data-tab="orders">Pedidos</button>
                <button class="nav-btn" data-tab="drones">Drones</button>
                <button class="nav-btn" data-tab="simulation">Simulação</button>
                <button class="nav-btn" data-tab="reports">Relatórios</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="container">
                <h2>Dashboard - Visão Geral</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-deliveries">0</h3>
                            <p>Entregas Realizadas</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="avg-delivery-time">0 min</h3>
                            <p>Tempo Médio</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-drone"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="active-drones">0</h3>
                            <p>Drones Ativos</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-battery-three-quarters"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="avg-battery">100%</h3>
                            <p>Bateria Média</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Mapa de Entregas</h3>
                        <div id="map" class="map-container"></div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Status dos Drones</h3>
                        <div id="drone-status" class="drone-status-list"></div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Fila de Pedidos</h3>
                        <div id="orders-queue" class="orders-queue"></div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3>Performance</h3>
                        <canvas id="performance-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Orders Tab -->
        <div id="orders" class="tab-content">
            <div class="container">
                <h2>Gestão de Pedidos</h2>
                
                <div class="form-section">
                    <h3>Novo Pedido</h3>
                    <form id="order-form" class="order-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customer-name">Nome do Cliente</label>
                                <input type="text" id="customer-name" required>
                            </div>
                            <div class="form-group">
                                <label for="package-weight">Peso (kg)</label>
                                <input type="number" id="package-weight" min="0.1" max="10" step="0.1" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="delivery-x">Coordenada X</label>
                                <input type="number" id="delivery-x" min="0" max="100" required>
                            </div>
                            <div class="form-group">
                                <label for="delivery-y">Coordenada Y</label>
                                <input type="number" id="delivery-y" min="0" max="100" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="priority">Prioridade</label>
                                <select id="priority" required>
                                    <option value="baixa">Baixa</option>
                                    <option value="media">Média</option>
                                    <option value="alta">Alta</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="delivery-time">Prazo Desejado</label>
                                <input type="datetime-local" id="delivery-time">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Criar Pedido
                        </button>
                    </form>
                </div>

                <div class="orders-list">
                    <h3>Pedidos Ativos</h3>
                    <div id="orders-table" class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Peso</th>
                                    <th>Localização</th>
                                    <th>Prioridade</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="orders-tbody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drones Tab -->
        <div id="drones" class="tab-content">
            <div class="container">
                <h2>Gestão de Drones</h2>
                
                <div class="form-section">
                    <h3>Adicionar Drone</h3>
                    <form id="drone-form" class="drone-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="drone-name">Nome/ID do Drone</label>
                                <input type="text" id="drone-name" required>
                            </div>
                            <div class="form-group">
                                <label for="drone-capacity">Capacidade (kg)</label>
                                <input type="number" id="drone-capacity" min="1" max="50" value="10" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="drone-range">Alcance (km)</label>
                                <input type="number" id="drone-range" min="10" max="200" value="50" required>
                            </div>
                            <div class="form-group">
                                <label for="drone-speed">Velocidade (km/h)</label>
                                <input type="number" id="drone-speed" min="30" max="120" value="60" required>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Adicionar Drone
                        </button>
                    </form>
                </div>

                <div class="drones-grid" id="drones-grid">
                    <!-- Drone cards will be populated here -->
                </div>
            </div>
        </div>

        <!-- Simulation Tab -->
        <div id="simulation" class="tab-content">
            <div class="container">
                <h2>Simulação em Tempo Real</h2>
                
                <div class="simulation-controls">
                    <button id="start-simulation" class="btn btn-success">
                        <i class="fas fa-play"></i>
                        Iniciar Simulação
                    </button>
                    <button id="pause-simulation" class="btn btn-warning" disabled>
                        <i class="fas fa-pause"></i>
                        Pausar
                    </button>
                    <button id="stop-simulation" class="btn btn-danger" disabled>
                        <i class="fas fa-stop"></i>
                        Parar
                    </button>
                    <button id="reset-simulation" class="btn btn-secondary">
                        <i class="fas fa-redo"></i>
                        Resetar
                    </button>
                    
                    <div class="speed-control">
                        <label for="simulation-speed">Velocidade:</label>
                        <select id="simulation-speed">
                            <option value="0.5">0.5x</option>
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="5">5x</option>
                            <option value="10">10x</option>
                        </select>
                    </div>
                </div>

                <div class="simulation-display">
                    <div class="simulation-map">
                        <div id="simulation-grid" class="grid-container"></div>
                    </div>
                    
                    <div class="simulation-info">
                        <h3>Status da Simulação</h3>
                        <div id="simulation-status" class="status-info">
                            <p><strong>Tempo Simulado:</strong> <span id="sim-time">00:00:00</span></p>
                            <p><strong>Pedidos Processados:</strong> <span id="processed-orders">0</span></p>
                            <p><strong>Drones Ativos:</strong> <span id="active-drones-sim">0</span></p>
                        </div>
                        
                        <div class="event-log">
                            <h4>Log de Eventos</h4>
                            <div id="event-log" class="log-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports" class="tab-content">
            <div class="container">
                <h2>Relatórios e Análises</h2>
                
                <div class="reports-controls">
                    <div class="form-group">
                        <label for="report-period">Período:</label>
                        <select id="report-period">
                            <option value="today">Hoje</option>
                            <option value="week">Esta Semana</option>
                            <option value="month">Este Mês</option>
                            <option value="all">Todos os Dados</option>
                        </select>
                    </div>
                    <button id="generate-report" class="btn btn-primary">
                        <i class="fas fa-chart-bar"></i>
                        Gerar Relatório
                    </button>
                    <button id="export-report" class="btn btn-secondary">
                        <i class="fas fa-download"></i>
                        Exportar
                    </button>
                </div>

                <div class="reports-grid">
                    <div class="report-card">
                        <h3>Eficiência dos Drones</h3>
                        <canvas id="drones-efficiency-chart"></canvas>
                    </div>
                    
                    <div class="report-card">
                        <h3>Distribuição de Prioridades</h3>
                        <canvas id="priority-distribution-chart"></canvas>
                    </div>
                    
                    <div class="report-card">
                        <h3>Tempo de Entrega</h3>
                        <canvas id="delivery-time-chart"></canvas>
                    </div>
                    
                    <div class="report-card">
                        <h3>Consumo de Bateria</h3>
                        <canvas id="battery-consumption-chart"></canvas>
                    </div>
                </div>

                <div class="detailed-report">
                    <h3>Relatório Detalhado</h3>
                    <div id="detailed-report-content" class="report-content">
                        <!-- Report content will be generated here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification System -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Modal for confirmations -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Confirmação</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="modal-message"></p>
            </div>
            <div class="modal-footer">
                <button id="modal-confirm" class="btn btn-primary">Confirmar</button>
                <button id="modal-cancel" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Carregando...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="src/js/utils/calculations.js"></script>
    <script src="src/js/utils/validators.js"></script>
    <script src="src/js/models/Order.js"></script>
    <script src="src/js/models/Drone.js"></script>
    <script src="src/js/models/SimulationEngine.js"></script>
    <script src="src/js/services/DroneService.js"></script>
    <script src="src/js/services/OrderService.js"></script>
    <script src="src/js/services/OptimizationService.js"></script>
    <script src="src/js/controllers/SimulationController.js"></script>
    <script src="src/js/main.js"></script>
</body>
</html>
